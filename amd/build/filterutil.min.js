define("oerapi_oerhub/filterutil",["exports","core/str"],(function(_exports,_str){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0;const readFilter=()=>{const selectedValues=Array.from(document.querySelectorAll("select.filterdata")).reduce(((values,select)=>{const id=select.id,selectedValue=select.value;return"yearfrom"!==id&&"yearto"!==id||document.getElementById("".concat(id,"checkbox")).checked?(values[id]=selectedValue,values):values}),{});if(selectedValues.yearfrom&&selectedValues.yearto&&selectedValues.yearfrom>selectedValues.yearto){const errorDiv=document.getElementById("yeartofilter");if(errorDiv&&!errorDiv.querySelector(".date-error")){const errorMsg=document.createElement("p");errorMsg.classList.add("date-error"),(0,_str.getString)("dateerror","oerapi_oerhub").then((infomessage=>{errorMsg.textContent=infomessage,errorDiv.appendChild(errorMsg)}))}return!1}const errorDiv=document.getElementById("yeartofilter");if(errorDiv){const existingError=errorDiv.querySelector(".date-error");existingError&&existingError.remove()}return document.getElementById("filterdata").value=JSON.stringify(selectedValues),!0},toggleDropdown=(checkboxId,dropdownId)=>{const checkbox=document.getElementById(checkboxId),dropdown=document.getElementById(dropdownId);checkbox&&dropdown&&(dropdown.disabled=!checkbox.checked)};_exports.init=()=>{const attachEvent=(selector,event,handler)=>{const element=document.getElementById(selector);element&&element.addEventListener(event,handler)};attachEvent("submitfilter","click",(function(e){readFilter()||e.preventDefault()})),attachEvent("perpage","change",(function(){readFilter()&&this.form.submit()})),attachEvent("yearfromcheckbox","click",(()=>toggleDropdown("yearfromcheckbox","yearfrom"))),attachEvent("yeartocheckbox","click",(()=>toggleDropdown("yeartocheckbox","yearto")))}}));

//# sourceMappingURL=filterutil.min.js.map